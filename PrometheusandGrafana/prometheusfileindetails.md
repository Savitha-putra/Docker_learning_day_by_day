Full prometheus.yml (Recap)
```yaml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['prometheus:9090']

  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']
```
üîç Line-by-Line Breakdown
‚úÖ global: section
```yaml
global:
  scrape_interval: 15s
```
scrape_interval: How often Prometheus collects metrics (default is 1m, here it's 15s).
This means every 15 seconds, Prometheus checks all configured targets for new data.

üì¶ scrape_configs: section
This is where you define what services Prometheus should monitor, and how.

Each entry under scrape_configs is called a job.

üß™ Job #1: Prometheus monitoring itself
```yaml
- job_name: 'prometheus'
  static_configs:
    - targets: ['prometheus:9090']
```
job_name: A label to organize this group of targets.

static_configs: Defines a static list of target endpoints.

targets: Services Prometheus should scrape (in this case, itself).

Prometheus exposes its own metrics at /metrics on port 9090.

üå°Ô∏è Job #2: Node Exporter (Host Metrics)
```yaml
- job_name: 'node-exporter'
  static_configs:
    - targets: ['node-exporter:9100']
```
Job name: Identifies this as a host metrics collector.

Target: The Node Exporter container running on port 9100.

This job collects OS-level and container-level metrics like:

CPU usage

Memory consumption

Disk I/O

Network stats

Docker container details (via cgroups)

‚ö†Ô∏è Notes on Service Discovery
Prometheus resolves these target names (prometheus, node-exporter) by Docker container name, thanks to Docker Compose networking.

If you were not using Docker Compose, you'd need actual IPs or localhost.

‚úÖ Summary Table
Field	Purpose
scrape_interval	Global frequency for scraping targets
job_name	Label to group a set of targets
targets	Services to scrape metrics from

Next to learn
üëÄ Want More?
You can extend this file later to:

Scrape a custom app like Python/Node/Java

Use relabel_configs to filter labels

 What is Prometheus?
Prometheus is an open-source monitoring and alerting toolkit originally built at SoundCloud. It is now part of the CNCF (like Kubernetes) and is widely used to collect and query time-series metrics.

üß† Core Concepts
Concept	Description
Metric	A single numerical value (like CPU usage, memory) collected over time
Time Series	A sequence of data points indexed in time order
Exporter	A service that exposes metrics in a Prometheus-compatible format
PromQL	A powerful query language to extract and analyze data
Alertmanager	A component that handles alerts generated by Prometheus
Pull Model	Prometheus pulls metrics from targets (not pushed to it)

üè≠ How It's Used in the Industry
Prometheus is widely used for:

Use Case	Example
Infrastructure Monitoring	Track CPU, RAM, Disk, Network usage for servers, VMs, or Kubernetes nodes
Application Monitoring	Monitor HTTP response codes, request durations, DB query performance
Kubernetes Monitoring	Combined with kube-state-metrics and node-exporter
Alerting	Send alerts via email, Slack, PagerDuty, etc., through Alertmanager
Dashboards	Usually visualized with Grafana, a popular dashboard tool

üîß Basic Architecture Diagram
```text
+------------------+       +---------------------+
|  Node Exporter   | <---> |                     |
|  App Exporter    |       |                     |
+------------------+       |    Prometheus       |
                           |     Server          | --> Alertmanager
+------------------+       |                     |
|  Kubernetes API  | <---> |                     |
+------------------+       +---------------------+
                                 |
  ```
                               ‚Üì
                             Grafana UI
üöÄ Getting Started in 5 Steps
Install Prometheus
Use Docker, binary, or Helm chart (for K8s). Example:

```bash
docker run -p 9090:9090 prom/prometheus
```

Configure prometheus.yml

```yaml
scrape_configs:
  - job_name: 'node'
    static_configs:
      - targets: ['localhost:9100']
```
Run an Exporter
Example: Node Exporter for system metrics

```yaml
./node_exporter
```
Visit Prometheus UI
Open http://localhost:9090 to write PromQL queries and view metrics.

Add Grafana (Optional but recommended)
Connect Grafana to Prometheus for beautiful dashboards.

üìä Example PromQL Queries
CPU Usage:

```promql
rate(node_cpu_seconds_total{mode="user"}[5m])
```

Memory Available:

```promql
node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes
```
HTTP Error Rate:

```promql
rate(http_requests_total{status=~"5.."}[5m])
```

üîê In Production, Companies Use It To:
Proactively detect system outages

Trigger autoscaling or failovers

Enforce SLAs with alert thresholds

Correlate app performance with infrastructure state

Integrate with GitOps for alert rule versioning

Would you like a mini project where we:

Deploy Prometheus + Node Exporter + Grafana on Docker or K8s?

Create basic alerts and dashboards?

Discover targets dynamically (e.g., via Kubernetes service discovery)

Add alerting rules using rule_files

Would you like an example of how to expose custom metrics from a Python or Node.js app and let Prometheus scrape that too?

